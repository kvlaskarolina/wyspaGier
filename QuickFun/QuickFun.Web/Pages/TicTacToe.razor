@page "/tictactoe"
@using QuickFun.Games.Engines
@using QuickFun.Games.TicTacToe.Strategies

<h3>Tic Tac Toe vs AI</h3>

<div class="difficulty-selector">
    <button @onclick="() => SetDifficulty(Level.Easy)">Łatwy</button>
    <button @onclick="() => SetDifficulty(Level.Medium)">Średni</button>
    <button @onclick="() => SetDifficulty(Level.Hard)">Trudny</button>
</div>

<div class="game-board">
    @for (int i = 0; i < 9; i++)
    {
        int index = i;
        <button class="cell" @onclick="() => engine.MakeMove(index)"
            disabled="@(engine.IsGameOver || engine.Board[index] != '\0')">
            @engine.Board[index]
        </button>
    }
</div>

<p>@engine.Message</p>

@if (engine.IsGameOver)
{
    <button @onclick="ResetGame">Nowa gra</button>
}

@code {
    private TicTacToeEngineWithAI engine = new();

    private void SetDifficulty(Level level)
    {
        engine.SetDifficulty(level);
        ResetGame();
    }

    private void ResetGame()
    {
        engine.ResetGame();
    }
}